if(void 0===window.giftbeeloaded||null===document.getElementById("giftbee-loaded")){try{window.giftbeeloaded=!0;var elem54214243=document.createElement("div");elem54214243.id="giftbee-loaded",elem54214243.style.cssText="display:none;",document.body.appendChild(elem54214243)}catch(t){console.error(t)}!function(){var t={bucket:0,capacity:10,delay:500,add:function(){this.bucket++,this.clearBucket()},clearBucketTimeout:null,clearBucket:function(){null!==this.clearBucketTimeout&&clearTimeout(this.clearBucketTimeout);var t=this;setTimeout((function(){t.bucket=0}),this.delay)},hasSpace:function(){return this.bucket<this.capacity}};!function(e){for(var n=[{id:47756,name:"Auto add to cart bot",must_include_any_variant:"true",remove_the_initial_variants:"false",works_in_reverse:"true",status:"enabled",apply_once_per_cart:"true",condition_type:"products",cart_value_min:"0",cart_value_max:"",cart_value_max_enable:"false",apply_once_per_session:"false",apply_only_on_add_to_cart:"false",products_min:"0",products_max:"",products_max_enable:"false",product_variants_contain:[{product_id:"7617150386414",variant_id:"42619240349934",title:"Jogo De Passadeira Coroa Malha Vermelho - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"7625764864238",variant_id:"42645186445550",title:"Toalha De Mesa Retalho Chita 2,20x1,40m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"7949072171246",variant_id:"43676679438574",title:"Tapete Médio Linha Capri Cru com Listras Coloridas 0,80x1,50m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8047931031790",variant_id:"44123530068206",title:"Jogo de Passadeira Linha Bico Colorido - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8063355945198",variant_id:"44157419159790",title:"Tapete em Linha Colorido 2,00x3,00m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8063356141806",variant_id:"44157420896494",title:"Tapete em Linha Colorido 1,50x2,00m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8190646386926",variant_id:"44498478956782",title:"Tapete em Linha Colorido 2,00x2,50m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8219993538798",variant_id:"44591471919342",title:"Tapete em Malha Listrado Colorido Sem Franja 1,50x1,50m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8219993571566",variant_id:"44591471952110",title:"Tapete em Malha Listrado Colorido Sem Franja 1,50x2,00m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8485370724590",variant_id:"45283019063534",title:'Tapete Algodão Bordado "X" Marrom Café 50x80cm - Default Title',selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8593101390062",variant_id:"45545757343982",title:"Passadeira Linha Bico Colorida 1,50m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8593101816046",variant_id:"45545757802734",title:"Passadeira Linha Bico Colorida 2,00m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8654295335150",variant_id:"45744614080750",title:"Passadeira Linha Bico Colorida 2,50m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8654295630062",variant_id:"45744617881838",title:"Passadeira Linha Bico Colorida 3,00m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8690529665262",variant_id:"45918965989614",title:"Colcha Solteiro Retalho Chita Bainha 1,40x2,20m - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8712014135534",variant_id:"45998089535726",title:"Bolsa Necessaire Malha Tear Amarela - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8712014266606",variant_id:"45998089699566",title:"Bolsa Necessaire Malha Tear Branca - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8712014397678",variant_id:"45998091469038",title:"Bolsa Necessaire Malha Tear Preta - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8712014594286",variant_id:"45998092714222",title:"Bolsa Necessaire Malha Tear Azul Marinho - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8714082877678",variant_id:"46006792847598",title:"Bolsa Necessaire Malha Tear Tifanny - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8714083008750",variant_id:"46006793011438",title:"Bolsa Necessaire Malha Tear Vermelha - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8733587177710",variant_id:"46069899886830",title:"Bolsa Necessaire Malha Tear Cru - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8733587243246",variant_id:"46069899952366",title:"Bolsa Necessaire Malha Tear Laranja - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8733587276014",variant_id:"46069900050670",title:"Bolsa Necessaire Malha Tear Rosa - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8755477315822",variant_id:"46140570304750",title:"Bolsa Crochê Sanfoninha Verde Limão - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8755477577966",variant_id:"46140571255022",title:"Bolsa Crochê Sanfoninha Azul Escuro - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8755477807342",variant_id:"46140571713774",title:"Bolsa Crochê Sanfoninha Cinza Claro - Default Title",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756409598190",variant_id:"46145133936878",title:"Capa Almofada em Linha 100% Algodão Origens - Terracota",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756409598190",variant_id:"46145133969646",title:"Capa Almofada em Linha 100% Algodão Origens - Arco Íris",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756409598190",variant_id:"46145134002414",title:"Capa Almofada em Linha 100% Algodão Origens - Listrada Verde",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756409598190",variant_id:"46145134035182",title:"Capa Almofada em Linha 100% Algodão Origens - Mostarda",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756409598190",variant_id:"46145134067950",title:"Capa Almofada em Linha 100% Algodão Origens - Verde Musgo",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756411236590",variant_id:"46145136591086",title:"Tapete em Linha Bico 48x78cm - Azul",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1},{product_id:"8756411236590",variant_id:"46145136623854",title:"Tapete em Linha Bico 48x78cm - Colorido",selling_plan_name:"One-time purchase or any selling plan",selling_plan_id:"one_time_or_any",quantity:1}],product_variants_add:[{product_id:"8757234073838",variant_id:"46147747381486",title:"BRINDE ORIGENS Bolsa Necessaire Malha Tear - Default Title",selling_plan_name:"",selling_plan_id:"",quantity:1}],use_date_condition:"false",date_from:null,date_to:null,type:"classic",psp_title:"",psp_description:"",ask_for_confirmation:"false",confirmation_title:"",confirmation_description:"",restrict_amount_to_products_included:"false",add_products_even_if_already_in_the_cart:"false"}],a=[],i=(new Date).getTime(),o=0;o<n.length;o++){var r=!0;if(void 0!==n[o].use_date_condition&&"true"===n[o].use_date_condition){if(void 0!==n[o].date_from&&null!==n[o].date_from&&""!==n[o].date_from.trim())new Date(n[o].date_from).getTime()>i&&(r=!1);if(void 0!==n[o].date_to&&null!==n[o].date_to&&""!==n[o].date_to.trim())new Date(n[o].date_to).getTime()<i&&(r=!1)}!0===r&&a.push(n[o])}if("undefined"!=typeof Shopify&&void 0!==Shopify.currency&&void 0!==Shopify.currency.rate)for(var c=1*Shopify.currency.rate,l=0;l<a.length;l++){var u=a[l];"cart_value"!==u.condition_type&&"cart_value_and_products"!==u.condition_type&&"n_products_and_cart_value"!==u.condition_type||(""!==u.cart_value_min&&(u.cart_value_min=u.cart_value_min*c),""!==u.cart_value_max&&(u.cart_value_max=u.cart_value_max*c))}var d=[];function s(t,e,n){void 0!==d[t]&&clearTimeout(d[t]),d[t]=setTimeout(e,n)}var p,_,h,f,m=(p={key:"cartbot_data_",save:function(t,e){try{localStorage.setItem(this.getKey()+t,e)}catch(t){console.log("Error when saving data",t)}},get:function(t){try{var e=localStorage.getItem(this.getKey()+t);return JSON.parse(e)}catch(t){return!1}return!1},getKey:function(){return this.key}},{cart:{_cartData:{items:[]},get cartData(){if(0===this._cartData.items.length){var t=p.get("cart");if(!1!==t)return t}return this._cartData},set cartData(t){this._cartData=t},get:function(e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),e){var a=Date.now();if(a=Math.round(a/1500),Object.keys(this.cartData).length>0){y&&console.log("---- reading cart data from cache via promise ----");var i=this;return new Promise(((t,e)=>{t(new Response(JSON.stringify(i.cartData),{status:200,statusText:"Smashing success!"}))}))}}return!1===t.hasSpace()?(console.log("leaky bucket is full"),null):(t.add(),i=this,fetch(_.getRootUrl()+"cart.json?cartbot-cart-call",{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){return t.clone().json().then((function(e){var a=JSON.parse(JSON.stringify(e));if(void 0!==window.bndlr&&"function"==typeof window.bndlr.updateCartWithDiscounts)try{var o=window.bndlr.updateCartWithDiscounts(a);void 0!==o.discounted_cart_object&&(a=o.discounted_cart_object)}catch(t){console.log(t)}return y&&console.log("---- saving cart data to cache ----",JSON.parse(JSON.stringify(a))),i.cartData=JSON.parse(JSON.stringify(a)),v=!1,n&&p.save("cart",JSON.stringify(a)),t}))})))}},nav:_={getRootUrl:function(){return window.location.origin?window.location.origin+"/":window.location.protocol+"/"+window.location.host+"/"},isHomePage:function(){return"/"===window.location.pathname},isProductPage:function(){return!!/\/products\/([^\?\/\n]+)/.test(window.location.href)},isCartPage:function(){return!!/\/cart\/?/.test(window.location.href)},getProductHandle:function(t){if(void 0===t&&(t=(t=window.location.href).replace("/products/products","/products")),/\/products\/([^\?\/\n]+)/.test(t)){var e=t.match(/\/products\/([^\?\/\n]+)/);if(void 0!==e[1])try{return decodeURIComponent(e[1]).replace("#","")}catch(t){return e[1].replace("#","")}}return!1},getAppApiEndpoint:function(){return"https://app.cart-bot.net/public/api/"},getInvoiceEndpoint:function(){return this.getAppApiEndpoint()+"cdo.php?shop=ddb-artesanato.myshopify.com"},getSellingPlanId:function(){var t=this.getQueryParams(window.location.search);return void 0!==t.selling_plan?t.selling_plan:""},getQueryParams:function(t){t=t.split("+").join(" ");for(var e,n={},a=/[?&]?([^=]+)=([^&]*)/g;e=a.exec(t);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n},reload:function(){window.location=self.location,window.location.reload(!0)},isQueryParameterSet:function(t){return void 0!==this.getQueryParams(window.location.search)[t]}},string:{getRandomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",n=e.length,a=[],i=0;i<t;i++)a.push(e.charAt(Math.floor(Math.random()*n)));return a.join("")}},queue:{queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&(this.queue[t].q[e](),this.tick(t))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},promiseQueue:h={queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&this.queue[t].q[e]().then((function(){setTimeout((function(){h.tick(t)}),10)}))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},cookie:{key:"cartbot_data_",maxAge:36e5,set:function(t,e,n){var a=new Date;t=this.key+t;var i={data:JSON.parse(e),time:(new Date).getTime()};if(e=JSON.stringify(i),n>0){a.setTime(a.getTime()+24*n*60*60*1e3);var o="expires="+a.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"}else document.cookie=t+"="+e+";path=/"},get:function(t){var e=(t=this.key+t)+"=",n=document.cookie;n=n.split(";");for(var a=[],i=0;i<n.length;i++)try{a.push(decodeURIComponent(n[i].trim(" ")))}catch(t){console.error(n[i])}var o="";for(i=0;i<a.length;i++){for(var r=a[i];" "==r.charAt(0);)r=r.substring(1);0==r.indexOf(e)&&(o=r.substring(e.length,r.length),i=a.length)}try{var c=JSON.parse(o);return void 0===c.time?o:c.time<(new Date).getTime()-this.maxAge?"":JSON.stringify(c.data)}catch(t){}return""}}}),y=!1;!0===m.nav.isQueryParameterSet("botdebug")&&(y=!0);var v=!1,g=function(){function e(t,e){for(;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null}canPreventCheckout=!0;var n=!1;function i(e,n){void 0===n&&(n=!1);var a=null;if(void 0!==e)a=e.closest("form, .icartShopifyCartContent");!1===n&&(S=function(){i(e,!0)});m.cart.get(!1).then((function(e){return e.clone().json().then((function(e){var n=function(t,e){var n=[],a=!1;try{var i=/\d+:[a-z0-9]+/,o=document;null!==e&&(o=e);var r=o.querySelectorAll('[name="updates[]"]');if(r.length>0)for(var c=0;c<r.length;c++){var l=r[c],u=l.id;if("string"==typeof u){var d=u.match(i);if(null!==d&&"string"==typeof d[0]){var s=d[0];if((_=1*l.value)>=0){for(var p=0;p<t.items.length;p++)t.items[p].key===s&&t.items[p].quantity!=_&&n.push({key:t.items[p].key,id:t.items[p].id,quantity:_});a=!0}}}if(!1===a){var _;if(void 0===l.dataset.index)var h=c;if(("string"==typeof h||"number"==typeof h)&&(h*=1)>0&&(_=1*l.value)>=0)for(p=0;p<t.items.length;p++)p+1===h&&t.items[p].quantity!=_&&n.push({key:t.items[p].key,id:t.items[p].id,quantity:_})}}}catch(t){console.error(t)}return n}(e,a);if(!(n.length>0))return changesWereMadeToTheCart=!1,l(!1,!1,"");if(!1===changesWereMadeToTheCart){var i=function(t,e){var n=!1;try{var a=/\d+:[a-z0-9]+/,i=document;null!==e&&(i=e);var o=i.querySelectorAll('[name="updates[]"]');if(o.length>0)for(var r=0;r<o.length;r++){var c=o[r],l=c.id;if("string"==typeof l){var u=l.match(a);if(null!==u&&"string"==typeof u[0]){var d=u[0];if((p=1*c.value)>=0){for(var s=0;s<t.items.length;s++)t.items[s].key===d&&t.items[s].quantity!=p&&(t.items[s].quantity=p,t.items[s].line_price=p*t.items[s].price,t.items[s].original_line_price=p*t.items[s].original_price,t.items[s].final_line_price=p*t.items[s].final_price);n=!0}}}if(!1===n){var p;if(void 0===c.dataset.index)var _=r;if(("string"==typeof _||"number"==typeof _)&&(_*=1)>0&&(p=1*c.value)>=0)for(s=0;s<t.items.length;s++)s+1===_&&t.items[s].quantity!=p&&(t.items[s].quantity=p,t.items[s].line_price=p*t.items[s].price,t.items[s].original_line_price=p*t.items[s].original_price,t.items[s].final_line_price=p*t.items[s].final_price)}}}catch(t){console.error(t)}return{cartData:t,quantityWasFixed:n}}(e,a);e=i.cartData,m.cart.cartData=e}var o=g(void 0,!1,"");return o.add.length>0||o.remove.length>0?async function(e,n){void 0===n&&(n=!0);var a=function(t){for(var e={},n=0;n<t.length;n++)void 0!==t[n].key?e[t[n].key]=t[n].quantity:void 0!==t[n].id&&(e[t[n].id]=t[n].quantity);return e}(e);if(!0===q)return console.log("Already adding to the cart"),null;if(q=!0,!1===t.hasSpace())return console.log("leaky bucket is full"),null;t.add();var i=".js",o="",r="/";void 0!==window.Shopify&&void 0!==window.Shopify.routes&&"string"==typeof window.Shopify.routes.root&&(r=window.Shopify.routes.root);return await fetch(r+"cart/update"+i+"?cartbot-cart-call&"+o,{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({updates:a})}).then((function(t){if(q=!1,n&&(void 0===t.status||200!==t.status))throw new Error("Cartbot: Couldnt add the product to the cart automatically. Please recreate your bot or check that the product you are trying to add exists and has the correct selling plan selected (if needed). "+t.status);"function"==typeof S&&S()})).catch((function(t){return q=!1,"function"==typeof S&&S(),null}))}(n).then((function(t){return l(!1,!1,"")})):void 0}))})).then((function(t){o()}))}function o(){if(void 0!==window.bndlr&&"function"==typeof bndlr.canUseCheckout&&"function"==typeof bndlr.checkout&&!0===bndlr.canUseCheckout())return bndlr.checkout(),!0;var t=!1;try{void 0!==window.gokwikSdk&&void 0!==window.gokwikSdk.initCheckout&&void 0!==window.merchantInfo&&(window.gokwikSdk.initCheckout(window.merchantInfo),t=!0)}catch(t){console.error(t)}if(!1===t){var e=document.querySelector(".cartbot-checkout-button-clicked");null!==e&&!1===changesWereMadeToTheCart?(canPreventCheckout=!1,e.click(),canPreventCheckout=!0,setTimeout((function(){window.location.href="/checkout"}),4e3)):window.location.href="/checkout"}}function r(t,e){return m.cart.get(!1).then((function(n){return l(!0,t,e)}))}function c(){return y&&console.log("== refreshing local cart =="),m.cart.get(!1)}function l(t,e,n){void 0===n&&(n="");var a=g(void 0,e,n),i=JSON.parse(JSON.stringify(a.remove));return a.add.length>0?(changesWereMadeToTheCart=!0,T(a.add).then((function(e){i.length>0?O(i).then((function(e){t&&m.nav.isCartPage()&&m.nav.reload()})):t&&m.nav.isCartPage()&&null!==e&&(console.log("reloading the cart page"),m.nav.reload())}))):a.remove.length>0?(changesWereMadeToTheCart=!0,O(a.remove).then((function(e){t&&m.nav.isCartPage()&&m.nav.reload()}))):new Promise(((t,e)=>{t(new Response("",{status:200,statusText:"Fallback promise."}))}))}function u(arguments,t){void 0===t&&(t=!1);var e=arguments[0],n=arguments[1],a=p(e,"add"),i=p(e,"change"),o={};if(a||t&&i)if("object"==typeof n&&"object"==typeof n.body)for(var r of n.body.entries())o[r[0]]=r[1];else if("object"==typeof n&&"string"==typeof n.body&&void 0!==n.headers&&"string"==typeof n.headers["Content-Type"]&&-1!==n.headers["Content-Type"].indexOf("application/json"))try{o=JSON.parse(n.body)}catch(t){}else if("object"==typeof n&&"string"==typeof n.body)o=m.nav.getQueryParams(n.body);else if("object"==typeof n&&void 0===n.body)try{for(var r of n.entries())o[r[0]]=r[1]}catch(t){console.log(t)}else if("string"==typeof n){try{o=JSON.parse(n)}catch(t){}if(0===Object.keys(o).length)try{o=m.nav.getQueryParams(n)}catch(t){}}if(void 0!==o.line&&void 0===o.id){var c=JSON.parse(JSON.stringify(m.cart.cartData)),l=1*o.line;l-=1,void 0!==c.items&&void 0!==c.items[l]&&(o.id=c.items[l].id,o.key=c.items[l].key)}if(void 0!==o.items&&void 0!==o.items[0]){var u=o.items;(o=o.items[0]).items=u}if(void 0!==o["id[]"]&&(o.id=o["id[]"]),void 0!==o["items[0][id]"]&&(o.id=o["items[0][id]"]),void 0!==o["items[0][quantity]"]&&(o.quantity=o["items[0][quantity]"]),void 0!==o["items[0][selling_plan]"]&&(o.selling_plan=o["items[0][selling_plan]"]),"string"==typeof o.id&&-1!==o.id.indexOf(":")){var d=o.id.split(":");"string"==typeof d[0]&&d[0].length>0&&(o.id=d[0])}if(void 0!==o.id){var s=1;void 0!==o.quantity&&(s=o.quantity);var _="";void 0!==o.selling_plan&&(_=o.selling_plan);var h=[];if(void 0!==o.items&&o.items.length>1)for(var f=0;f<o.items.length;f++){var y=o.items[f];if(void 0!==y.id){var v=1;void 0!==y.quantity&&(v=y.quantity);var g="";void 0!==y.selling_plan&&(g=y.selling_plan);var w={id:y.id,quantity:v,selling_plan:g};h.push(w)}}if(0===h.length){var b=!0;for(f=0;b;){if(void 0===o["items["+f+"][id]"])b=!1;else{var C=o["items["+f+"][id]"];v=1;void 0!==o["items["+f+"][quantity]"]&&(v=o["items["+f+"][quantity]"]);g="";void 0!==o["items["+f+"][selling_plan]"]&&(g=o["items["+f+"][selling_plan]"]);w={id:C,quantity:v,selling_plan:g};h.push(w)}f++}}return""!==o.id&&(1*o.id+""==o.id+""&&{id:o.id,quantity:s,selling_plan:_,other_items:h,number_of_line_in_cart:o.line})}return!1}function d(arguments){var t=arguments[0],e=["/cart/"],n=!1;if("string"==typeof t)for(var a=0;a<e.length;a++)-1!==t.indexOf(e[a])&&-1===t.indexOf("cartbot-cart-call")&&(n=!0,a=e.length);return n}function p(t,e){var n={add:["/cart/add.js","/cart/add.json","/cart/add"],change:["/cart/change.js","/cart/change.json","/cart/change","/cart/update.js","/cart/update.json"]};if(n.change.push("/cart/update"),void 0===n[e])return!1;var a=["cartbot-cart-call"],i=n[e],o=!1;if("string"==typeof t)for(var r=0;r<i.length;r++)if(-1!==t.indexOf(i[r])){for(var c=!1,l=0;l<a.length;l++)-1!==t.indexOf(a[l])&&(c=!0);!1===c&&(o=!0,r=i.length)}return o}function _(t){try{JSON.parse(t)}catch(t){return!1}return!0}function h(t,e,n){var a={add:[],remove:[]};if(void 0!==t.other_items&&t.other_items.length>1){var i=g(t.other_items[0],e,n,t.other_items);void 0!==i.add&&i.add.length>0&&(a.add=a.add.concat(i.add)),void 0!==i.remove&&i.remove.length>0&&(a.remove=a.remove.concat(i.remove))}else a=g(t,e,n);return a}function g(t,e,n,i){if(y&&(console.log("---- getActions ----"),console.trace()),void 0===e&&(e=!1),void 0===i&&(i=[]),void 0!==window.completelyDisableCartbotApp&&!0===window.completelyDisableCartbotApp)return console.log("Cartbot app was disabled by the completelyDisableCartbotApp variable"),{add:[],remove:[]};void 0===n&&(n="");var o=JSON.parse(JSON.stringify(m.cart.cartData));JSON.parse(JSON.stringify(o));y&&console.log("cart in getActions",JSON.parse(JSON.stringify(o)));var r=[];if(i.length<=1&&(i=[t]),void 0!==i&&i.length>0)for(var c=0;i.length>c;c++){var l=i[c];if(null!=l){var u=!1;if(null!==o&&void 0!==o.items&&o.items.length>0)for(var d=0;d<o.items.length;d++){var s="";void 0!==o.items[d].selling_plan_allocation&&(s=o.items[d].selling_plan_allocation.selling_plan.id);var p="";void 0!==l.selling_plan&&(p=l.selling_plan),1*o.items[d].id!=1*l.id&&o.items[d].key!==l.id||s+""!=p+""&&(1*l.quantity!=0||"change"!==n)||(o.items[d].quantity="change"===n?1*l.quantity:1*o.items[d].quantity+1*l.quantity,u=!0,d=o.items.length)}if(!1===u&&"change"!==n){var _={id:1*l.id,quantity:1*l.quantity,key:1*l.id};void 0!==l.selling_plan&&null!==l.selling_plan&&(_.selling_plan_allocation={selling_plan:{id:l.selling_plan}}),o.items.push(_)}void 0!==l.quantity&&l.quantity}}var h=0;if(void 0!==o.items&&o.items.length>0)for(d=0;d<o.items.length;d++)void 0!==o.items[d].line_price&&(h+=o.items[d].line_price);h/=100,y&&console.log("totalCartValue",h);for(var v=[],g=[],w=0;w<a.length;w++)for(var b=a[w],C=!0,k=0;C&&k<1e4;){C=!1,k++;var q=JSON.parse(JSON.stringify(o)),S=!0,T="true"!==b.must_include_any_variant,O="true"===b.works_in_reverse;"n_products"!==b.condition_type&&"n_products_and_cart_value"!==b.condition_type||(T=!1);var D=!1,N=[],A=!1;if("true"===b.apply_once_per_session&&!0!==e)try{""!==(G=m.cookie.get("applied_rules"))&&(G=JSON.parse(G)),void 0!==G["_"+b.id]&&(A=!0,S=!1)}catch(t){console.error("cartbot",t)}if("products"===b.condition_type||"n_products"===b.condition_type||"cart_value_and_products"===b.condition_type||"n_products_and_cart_value"===b.condition_type){var j=[];if(b.product_variants_contain.length>0){for(var x=0,E=0,P=0,J=0;J<b.product_variants_contain.length;J++)for(var R=b.product_variants_contain[J],L=0,M=(JSON.parse(JSON.stringify(N)),JSON.parse(JSON.stringify(o.items)),0);M<o.items.length;M++){s="";if(void 0!==(_=o.items[M]).selling_plan_allocation&&(s=_.selling_plan_allocation.selling_plan.id+""),1*R.variant_id==1*_.id&&_.quantity>0&&L<R.quantity&&(R.selling_plan_id+""===s||"one_time_or_any"===R.selling_plan_id||"any"===R.selling_plan_id&&""!==s))if("n_products"===b.condition_type||"n_products_and_cart_value"===b.condition_type){var I=null;"true"===b.products_max_enable?(I=1*b.products_max,I-=x):I=99999999;var B=_.quantity;B>I&&(B=I),x++,E+=B,P+=_.quantity,_.quantity=_.quantity-B,"n_products_and_cart_value"===b.condition_type&&(L=B),y&&console.log("Reducing quantity of item "+_.id+" for quantity of "+B+" because of "+b.name+" rule"),N.push({id:R.variant_id,quantity:B,line_key:_.key})}else{var U=_.quantity;U>R.quantity&&(U=R.quantity),_.quantity=_.quantity-U,(L+=U)===R.quantity&&x++,y&&console.log("Reducing quantity of item "+_.id+" for quantity of "+U+" because of "+b.name+" rule",_.quantity),N.push({id:R.variant_id,quantity:R.quantity,line_key:_.key})}else 1*R.variant_id==1*_.id&&(_.quantity<=0&&j.push("Item "+_.id+" doesnt have enough quantity: "+_.quantity),L>=R.quantity&&j.push("We applied more quantity already than what is required for "+1*R.variant_id+". Applied quantity: "+L),R.selling_plan_id+""!==s&&"one_time_or_any"!==R.selling_plan_id&&"any"===R.selling_plan_id&&""!==s&&j.push("Selling plan doesnt match "+1*R.variant_id+". Selling plan: "+s),y&&console.log("reasons",j));!0===T?x===b.product_variants_contain.length&&(M=o.items.length):"n_products"===b.condition_type||"n_products_and_cart_value"===b.condition_type?"true"===b.products_max_enable&&E>=1*b.products_max?(M=o.items.length,y&&console.log("Stopping the loop")):y&&console.log("NOT stopping the loop"):x>0?(M=o.items.length,y&&console.log("Stopping the loop"),"false"===b.apply_once_per_cart&&(J=b.product_variants_contain.length)):y&&console.log("NOT stopping the loop")}!0===T?(S=x===b.product_variants_contain.length,"cart_value_and_products"===b.condition_type&&(f=!0===S)):"n_products"===b.condition_type||"n_products_and_cart_value"===b.condition_type?(S=E>=1*b.products_min,"true"===b.products_max_enable&&P>1*b.products_max&&(S=!1)):"cart_value_and_products"===b.condition_type?f=x>0:S=x>0}}else if("cart_value"===b.condition_type){S=!1;var Q=h;"true"===b.cart_value_max_enable?1*b.cart_value_min<=Q&&1*b.cart_value_max>=Q&&(S=!0):1*b.cart_value_min<=Q&&(S=!0)}if("cart_value_and_products"===b.condition_type){let t=!1,e=f;if(S=!1,"true"===b.restrict_amount_to_products_included){let t=[];for(let e=0;e<o.items.length;e++)for(let n=0;n<b.product_variants_contain.length;n++)o.items[e].variant_id+""==b.product_variants_contain[n].variant_id+""&&t.push(o.items[e].variant_id);h=0,t.forEach((t=>{for(let e=0;e<o.items.length;e++)t===o.items[e].variant_id&&(h+=o.items[e].line_price)})),h/=100}"true"===b.cart_value_max_enable?1*b.cart_value_min<=h&&1*b.cart_value_max>=h&&(t=!0):1*b.cart_value_min<=h&&(t=!0),S=!0===t&&!0===e}if("n_products_and_cart_value"===b.condition_type){let t=!1;S=!1,"true"===b.cart_value_max_enable?t=h>=1*b.cart_value_min&&h<=1*b.cart_value_max:h>=1*b.cart_value_min&&(t=!0),!0===t&&(S=E>=1*b.products_min)}if(y&&console.log("canAddItems",S),S){if("true"===b.apply_only_on_add_to_cart&&"add"!==n){C=!1;continue}if(b.product_variants_add.length>0){for(J=0;J<b.product_variants_add.length;J++){var H=(Z=b.product_variants_add[J]).quantity,z=!1;if("add"!==n||"true"===b.apply_once_per_cart||"false"===b.remove_the_initial_variants)for(M=0;M<o.items.length;M++){s="";if(void 0!==(_=o.items[M]).selling_plan_allocation&&(s=_.selling_plan_allocation.selling_plan.id),1*Z.variant_id==1*_.id&&_.quantity>0&&s+""==Z.selling_plan_id+""){var $=!0;if("true"===b.add_products_even_if_already_in_the_cart&&($=!1,void 0!==_.properties&&void 0!==_.properties._added_by_cartbot&&($=!0)),!0===$){var V=_.quantity;if(V>Z.quantity&&(V=Z.quantity),H<V&&(V=H),"true"===b.remove_the_initial_variants&&"false"===b.apply_once_per_cart||(H-=V)<0&&(H=0),z=!0,_.quantity=_.quantity-V,y&&(console.log("Subtracting quantity of item "+_.id+" for quantity of "+V+" because of "+b.name+" rule"),console.log("New quantity "+_.quantity)),"true"===b.apply_once_per_cart&&_.quantity>0&&O&&"cart_value"!==b.condition_type){var F=JSON.parse(JSON.stringify(b));r.push(F),C=!1}if("true"===b.apply_once_per_cart&&_.quantity>0&&O&&"cart_value"===b.condition_type){F=JSON.parse(JSON.stringify(b));r.push(F),C=!1}}}}!1===z||!0===z&&H>0?(!1===A&&v.push({id:Z.variant_id,quantity:H,selling_plan:Z.selling_plan_id}),D=!0,y&&console.log("Adding variant "+Z.variant_id+" to the cart with quantity of "+H+" because of "+b.name+" rule."),"false"===b.apply_once_per_cart&&"cart_value"!==b.condition_type&&(C=!0)):("false"===b.apply_once_per_cart&&"cart_value"!==b.condition_type&&(C=!0),N.length>0&&"true"===b.remove_the_initial_variants&&"false"===b.apply_once_per_cart&&(D=!0))}if("true"===b.apply_once_per_session&&!0===D&&!0!==e)try{var G;(G=""!==(G=m.cookie.get("applied_rules"))?JSON.parse(G):{})["_"+b.id]=b.id,m.cookie.set("applied_rules",JSON.stringify(G),0)}catch(t){}}}else o=JSON.parse(JSON.stringify(q)),O&&(y&&console.log("Adding rule in for removal",JSON.parse(JSON.stringify(b)),JSON.parse(JSON.stringify(q))),r.push(JSON.parse(JSON.stringify(b))));"true"===b.remove_the_initial_variants&&!0===D&&(g=g.concat(JSON.parse(JSON.stringify(N)))),N=[]}if(y&&console.log("rulesForRemoval",JSON.parse(JSON.stringify(r))),r.length>0)for(var W=0;W<r.length;W++){b=r[W];var X=[],K=o;for(J=0;J<b.product_variants_add.length;J++){var Z=b.product_variants_add[J];for(M=0;M<K.items.length;M++){s="";if(void 0!==(_=K.items[M]).selling_plan_allocation&&(s=_.selling_plan_allocation.selling_plan.id+""),1*Z.variant_id==1*_.id&&_.quantity>0&&Z.selling_plan_id+""===s){M=K.items.length;var Y=1*Z.quantity;"cart_value"===b.condition_type&&_.quantity>1*Z.quantity&&(Y=_.quantity),"true"===b.works_in_reverse&&(Y=_.quantity),X.push({id:Z.variant_id,quantity:1*Y,line_key:_.key}),_.quantity-=1*Y,y&&(console.log("Removing variant "+Z.variant_id+" for quantity of "+Y+" because of "+b.name+" rule"),console.log("Current quantity "+_.quantity+". Item id "+_.id),console.log(JSON.parse(JSON.stringify(K))))}}}g=g.concat(JSON.parse(JSON.stringify(X)))}return y&&m.nav.isQueryParameterSet("test")?{add:[],remove:[]}:(y&&console.log({add:JSON.parse(JSON.stringify(v)),remove:JSON.parse(JSON.stringify(g))}),{add:v,remove:g})}function w(){if("function"==typeof window.SLIDECART_UPDATE)try{window.SLIDECART_UPDATE()}catch(t){}if(void 0!==window.theme&&void 0!==window.theme.ajaxCart&&"function"==typeof window.theme.ajaxCart.update)try{window.theme.ajaxCart.update()}catch(t){}if("function"==typeof window.icartCartActivityEvent)try{window.icartCartActivityEvent()}catch(t){}try{document.dispatchEvent(new CustomEvent("cart:refresh"))}catch(t){}try{document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0}))}catch(t){}try{document.dispatchEvent(new CustomEvent("product:added",{detail:{quantity:1},bubbles:!0}))}catch(t){}if(void 0!==window.HsCartDrawer&&"function"==typeof window.HsCartDrawer.updateSlideCart&&s("hscartdrawer",(function(){try{HsCartDrawer.updateSlideCart()}catch(t){console.log(t)}}),100),void 0!==window.Hs_CartDrawer&&"function"==typeof window.Hs_CartDrawer.updateSlideCart&&s("hscartdrawer",(function(){try{Hs_CartDrawer.updateSlideCart()}catch(t){console.log(t)}}),100),void 0!==window.HS_SLIDE_CART_OPEN&&"function"==typeof window.HS_SLIDE_CART_OPEN&&s("hscartdraweropen",(function(){try{window.HS_SLIDE_CART_OPEN()}catch(t){bundlerConsole.log(t)}}),100),"undefined"!=typeof theme&&void 0!==theme.Cart&&"function"==typeof theme.Cart.updateCart)try{theme.Cart.updateCart()}catch(t){}if("function"==typeof window.updateMiniCartContents)try{window.updateMiniCartContents()}catch(t){}if("function"==typeof window.loadEgCartDrawer)try{window.loadEgCartDrawer()}catch(t){}try{document.dispatchEvent(new CustomEvent("cart:build"))}catch(t){}try{document.dispatchEvent(new CustomEvent("obsidian:upsell:refresh")),document.dispatchEvent(new CustomEvent("obsidian:upsell:open"))}catch(t){}var t=document.getElementById("site-cart");if(null!==t)try{t.show()}catch(t){}if("undefined"!=typeof CartJS&&"function"==typeof CartJS.getCart)try{CartJS.getCart()}catch(t){console.log(t)}if(void 0!==window.SLIDECART_UPDATE)try{window.SLIDECART_UPDATE()}catch(t){bundlerConsole.log(t)}if(void 0!==window.SLIDECART_OPEN&&setTimeout((function(){try{window.SLIDECART_OPEN()}catch(t){bundlerConsole.log(t)}}),500),"undefined"!=typeof Shopify&&void 0!==Shopify.theme&&void 0!==Shopify.theme.jsAjaxCart&&"function"==typeof Shopify.theme.jsAjaxCart.updateView)try{Shopify.theme.jsAjaxCart.updateView()}catch(t){}if("undefined"!=typeof Shopify&&void 0!==Shopify.theme&&void 0!==Shopify.theme.ajaxCart&&"function"==typeof Shopify.theme.ajaxCart.updateView)try{m.cart.get(!1).then((function(t){t.clone().json().then((function(t){Shopify.theme.ajaxCart.updateView({cart_url:window.location.origin+"/cart"},t)}))}))}catch(t){}if(void 0!==window.theme&&void 0!==window.theme.MiniCart&&"function"==typeof window.theme.MiniCart.update)try{theme.MiniCart.update()}catch(t){}if(void 0!==window.ajaxCart&&"function"==typeof window.ajaxCart.load)try{window.ajaxCart.load()}catch(t){}if(void 0!==window.cart&&"function"==typeof window.cart.getCart)try{window.cart.getCart()}catch(t){}if(void 0!==window.geckoShopify&&"function"==typeof window.geckoShopify.onCartUpdate)try{window.geckoShopify.onCartUpdate(1,1,19041994)}catch(t){}if(void 0!==window.Shopify&&"function"==typeof window.Shopify.KT_onItemAdded)try{window.Shopify.KT_onItemAdded()}catch(t){}if("function"==typeof window.flatRefreshCartCallback)try{window.flatRefreshCartCallback()}catch(t){}try{(e=document.querySelectorAll("html")[0]._x_dataStack[0]).updateCart(!0)}catch(t){}try{document.dispatchEvent(new CustomEvent("product:added",{detail:{quantity:0}}))}catch(t){}try{void 0!==window.Alpine&&window.Alpine.store("main").fetchCart()}catch(t){}try{void 0!==window.Alpine&&Alpine.store("xMiniCart").reLoad()}catch(t){}try{void 0!==window.Hs_CartDrawer&&"function"==typeof window.Hs_CartDrawer.updateSlideCart&&window.Hs_CartDrawer.updateSlideCart()}catch(t){}try{"function"==typeof window.updateCartDrawer&&window.updateCartDrawer()}catch(t){}try{void 0!==window.PXUTheme&&void 0!==window.PXUTheme.jsAjaxCart&&"function"==typeof window.PXUTheme.jsAjaxCart.updateView&&window.PXUTheme.jsAjaxCart.updateView()}catch(t){}try{var e;null!==(e=document.querySelector("#ajax-cart"))&&"function"==typeof e.getCartData&&e.getCartData()}catch(t){}try{m.cart.get(!1).then((function(t){t.clone().json().then((function(t){document.dispatchEvent(new CustomEvent("theme:cart:reload"));var e=document.querySelector('#cart-icon-bubble .cart-count-bubble span[aria-hidden="true"]');null!==e&&(e.innerHTML=t.item_count);var n=document.querySelector("#cart-notification-button");if(null!==n&&(n.innerHTML=n.innerHTML.replace(/\d+/,t.item_count)),void 0!==t.items&&0===t.items.length){var a=document.querySelector("cart-drawer.drawer");null!==a&&a.classList.add("is-empty")}void 0!==window.halo&&void 0!==window.halo.updateSidebarCart&&window.halo.updateSidebarCart(t);try{if(void 0!==window.theme&&void 0!==window.theme.cart&&void 0!==window.theme.cart.store&&"function"==typeof window.theme.cart.store.getState){var i=window.theme.cart.store.getState();"function"==typeof i.updateNote&&i.updateNote(t.note)}}catch(t){console.log(t)}}))}))}catch(t){console.error(t)}try{m.cart.get(!1).then((function(t){t.clone().json().then((function(t){if(void 0!==t.item_count){var e=t.item_count,n=document.querySelector("cart-count");null!==n&&(n.innerHTML=e);var a=document.querySelector(".satcb-cs-header-title .satcb-cs-header-count");null!==a&&(a.innerHTML=e);var i=document.querySelector("#CartCount [data-cart-count]");null!==i&&(i.innerHTML=e)}"undefined"!=typeof window&&void 0!==window.wetheme&&void 0!==window.wetheme.updateCartDrawer&&window.wetheme.updateCartDrawer(t)}))}))}catch(t){}try{var n=document.querySelector("cart-notification")||document.querySelector("cart-drawer mini-cart")||document.querySelector("cart-drawer")||document.querySelector("product-form.product-form")||document.querySelector("#mini-cart");if(null!==n&&"function"==typeof n.renderContents){var a="cart-drawer,cart-icon-bubble";if("function"==typeof n.getSectionsToRender){var i=[];a=n.getSectionsToRender();for(var o in a)a.hasOwnProperty(o)&&("string"==typeof a[o].section?i.push(a[o].section):"string"==typeof a[o].id&&i.push(a[o].id));i.length>0&&(a=i.join(","))}fetch(m.nav.getRootUrl()+"cart?sections="+a,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){try{var e={sections:t};n.renderContents(e)}catch(t){}}))}catch(t){}}))}}catch(t){console.error(t)}try{var r=document.querySelector("loess-cart-items")||document.querySelector("loess-cart-drawer-items");if(null!==r&&"function"==typeof r.renderCartItems){a="cart-drawer,cart-icon-bubble";if("function"==typeof r.getSectionsToRender){i=[],a=r.getSectionsToRender();for(var o in a)a.hasOwnProperty(o)&&("string"==typeof a[o].section?i.push(a[o].section):"string"==typeof a[o].id&&i.push(a[o].id));i.length>0&&(a=i.join(","))}fetch(m.nav.getRootUrl()+"cart?sections="+a,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){m.cart.get(!0).then((function(e){e.clone().json().then((function(e){e.sections=t,r.renderCartItems(e)}))}))}))}catch(t){console.error(t)}}))}}catch(t){console.error(t)}try{var c=document.querySelector(".minicart__outerbox");if(null!==c&&"function"==typeof window.cartContentUpdate){a=c.dataset.section;fetch(m.nav.getRootUrl()+"cart?sections="+a,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){m.cart.get(!0).then((function(e){e.clone().json().then((function(e){e.sections=t,window.cartContentUpdate(e,c,a)}))}))}))}catch(t){console.error(t)}}))}}catch(t){console.error(t)}try{setTimeout((()=>{document.dispatchEvent(new CustomEvent("dispatch:cart-drawer:refresh"))}),500)}catch(t){}try{"function"===window.$&&window.$("form.cart-drawer").length>0&&(window.$(".cart-drawer input").first().trigger("blur"),setTimeout((function(){window.$(".cart-drawer input").first().trigger("input")}),350))}catch(t){console.log(t)}try{window.dispatchEvent(new Event("update_cart"))}catch(t){}try{document.dispatchEvent(new Event("theme:cartchanged"))}catch(t){}try{void 0!==window.theme&&void 0!==window.theme.cart&&"function"==typeof window.theme.cart._updateCart&&window.theme.cart._updateCart()}catch(t){}try{void 0!==window.AMG&&void 0!==window.AMG.sidecart&&"function"==typeof window.AMG.sidecart.refresh&&window.AMG.sidecart.refresh()}catch(t){}if(void 0!==window.ajaxCart&&"function"==typeof window.ajaxCart.load)try{ajaxCart.load()}catch(t){}if(void 0!==window.Shopify&&"function"==typeof window.Shopify.onItemAdded)try{window.Shopify.onItemAdded()}catch(t){}if(void 0!==window.Rebuy&&void 0!==window.Rebuy.Cart&&"function"==typeof window.Rebuy.Cart.fetchShopifyCart)try{Rebuy.Cart.fetchShopifyCart((function(t){}))}catch(t){}try{void 0!==window.theme&&void 0!==window.theme.partials&&void 0!==window.theme.partials.Cart&&"function"==typeof window.theme.partials.Cart.updateAllHtml&&window.theme.partials.Cart.updateAllHtml((function(){}))}catch(t){}try{void 0!==window.refreshCart&&window.refreshCart()}catch(t){}try{void 0!==window.upcartRefreshCart&&window.upcartRefreshCart()}catch(t){}try{void 0!==window.theme&&void 0!==window.theme.updateCartSummaries&&window.theme.updateCartSummaries()}catch(t){}try{void 0!==window.liquidAjaxCart&&"function"==typeof window.liquidAjaxCart.cartRequestUpdate&&window.liquidAjaxCart.cartRequestUpdate()}catch(t){}try{var l=document.querySelector("cart-root");null!=l&&"function"==typeof l.updateHtml&&l.updateHtml()}catch(t){console.log(t)}try{void 0!==window.theme&&"function"==typeof window.theme.CartDrawer&&new theme.CartDrawer}catch(t){}try{var u=document.querySelectorAll("#MinimogCartDrawer");void 0!==u[0]&&"function"==typeof u[0].onCartDrawerUpdate&&u[0].onCartDrawerUpdate()}catch(t){console.log(t)}}function b(t,e=new FormData,n=""){for(let i in t)if(t.hasOwnProperty(i)){const o=t[i],r=n?`${n}[${i}]`:i;if("object"!=typeof o||Array.isArray(o))if(Array.isArray(o))for(var a=0;a<o.length;a++)b(o[a],e,`${r}[${a}]`);else e.append(r,o);else b(o,e,r)}return e}function C(t){let e="";for(let[n,a]of t.entries())e.length>0&&(e+="&"),e+=`${encodeURIComponent(n)}=${encodeURIComponent(a)}`;return e}function k(t,e){for(var n={items:[]},a=0;a<t.length;a++){var i={id:t[a].id,quantity:t[a].quantity};void 0!==t[a].selling_plan&&""!==t[a].selling_plan&&(i.selling_plan=t[a].selling_plan),void 0!==e&&(i.properties=e);for(var o=!1,r=0;r<n.items.length;r++)n.items[r].id!==i.id||typeof i.selling_plan!=typeof n.items[r].selling_plan||void 0!==i.selling_plan&&i.selling_plan!==n.items[r].selling_plan||(n.items[r].quantity+=i.quantity,o=!0);!1===o&&n.items.push(i)}void 0!==n.items&&1===n.items.length&&(n=n.items[0]);return n}changesWereMadeToTheCart=!1;var q=!1,S=function(){};async function T(e,n,a){void 0===n&&(n=!0);var i=k(e,a);if(!0===q)return console.log("Already adding to the cart"),null;if(q=!0,!1===t.hasSpace())return console.log("leaky bucket is full"),null;t.add();var o="/";return void 0!==window.Shopify&&void 0!==window.Shopify.routes&&"string"==typeof window.Shopify.routes.root&&(o=window.Shopify.routes.root),await fetch(o+"cart/add?cartbot-cart-call&",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)}).then((function(t){if(q=!1,n&&(void 0===t.status||200!==t.status))throw new Error("Cartbot: Couldnt add the product to the cart automatically. Please recreate your bot or check that the product you are trying to add exists and has the correct selling plan selected (if needed). "+t.status);if("function"==typeof window.$)try{window.$("body").trigger("added.ajaxProduct")}catch(t){}try{document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{})),setTimeout((function(){document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{}))}),1e3)}catch(t){}try{w()}catch(t){console.error(t)}"function"==typeof S&&S()})).catch((function(t){q=!1,console.log("error",t);try{w()}catch(t){console.error(t)}return"function"==typeof S&&S(),null}))}async function O(t){for(var e={},n=0;n<t.length;n++){var a=t[n],i=a.line_key;void 0===e[i]?e[i]={id:a.id,line_key:a.line_key,removable_quantity:1*a.quantity}:e[i].removable_quantity+=a.quantity}return m.cart.get(!1).then((function(t){return t.clone().json().then((function(t){var n={};for(var a in e)if(e.hasOwnProperty(a)){for(var i=!1,o=0;o<t.items.length;o++){if(t.items[o].key===a&&t.items[o].quantity>0)(l=t.items[o].quantity-e[a].removable_quantity)<0&&(l=0),t.items[o].quantity=l,n[a]=l,i=!0}if(!1===i)for(o=0;o<t.items.length;o++){if(0===t.items[o].key.indexOf(a)&&t.items[o].quantity>0)(l=t.items[o].quantity-e[a].removable_quantity)<0&&(l=0),n[a]=l,i=!0}if(!1===i){var r=a.split(":"),c="";void 0!==r[0]&&(c=r[0]);for(o=0;o<t.items.length;o++){var l;if(0===t.items[o].key.indexOf(c)&&t.items[o].quantity>0)(l=t.items[o].quantity-e[a].removable_quantity)<0&&(l=0),n[a]=l,i=!0}}}return Object.keys(n).length>0?fetch("/cart/update.js?cartbot-cart-call",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({updates:n})}).then((function(t){if("function"==typeof window.$)try{window.$("body").trigger("added.ajaxProduct")}catch(t){console.error(t)}try{document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{})),setTimeout((function(){document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{}))}),1e3)}catch(t){}try{w()}catch(t){console.error(t)}})):new Promise(((t,e)=>{t(new Response({},{status:200,statusText:"Smashing success!"}))}))}))}))}return{init:function(){if(void 0!==window.completelyDisableCartbotApp&&!0===window.completelyDisableCartbotApp)return console.log("Cartbot is disabled via completelyDisableCartbotApp variable."),!0;!function(){t=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){var n=this._url,a=!1;if("string"==typeof n&&n.length>0){var i=m.string.getRandomString(10);try{var o=this.onreadystatechange;if(this.onreadystatechange=function(){"function"==typeof o&&o.apply(this,arguments),200===this.status&&4===this.readyState&&m.promiseQueue.process(i)},p(n,"change")){var l=u([n,arguments[0]],!0);if((f=g(l,!1,"change")).remove.length>0){var s=arguments,_=this;a=!0,f.add.length>0?T(f.add,!1).then((function(e){f.remove.length>0&&f.remove[0].id==l.id&&f.remove[0].quantity===1*l.quantity?O(f.remove).then((function(t){m.nav.isCartPage()&&m.nav.reload()})):O(f.remove).then((function(e){t.apply(_,s)}))})):O(f.remove).then((function(e){t.apply(_,s)}))}else m.promiseQueue.add(i,(function(){return r(!1,"change")}),(function(){}))}else{var f;if(!1!==(l=u([n,arguments[0]])))if(v=!0,m.promiseQueue.add(i,(function(){return c()}),(function(){})),(f=h(l,!1,"add")).add.length>0){s=arguments,_=this,a=!0;var arguments,y=!1;if(f.remove.length>0&&f.remove[0].id==l.id&&f.remove[0].quantity===1*l.quantity&&"string"==typeof(arguments=s)[0]){var w=b(k(f.add));arguments[0]=C(w),y=!0,t.apply(_,arguments)}!1===y&&T(f.add,!1).then((function(e){t.apply(_,s),f.remove.length>0&&m.promiseQueue.add(i,(function(){return O(f.remove)}),(function(){}))}))}else f.remove.length>0?(s=arguments,_=this,O(f.remove).then((function(t){m.promiseQueue.process(i)}))):(m.promiseQueue.add(i,(function(){return r(!1,"add")}),(function(){})),setTimeout((function(){m.promiseQueue.process(i)}),500))}}catch(t){console.log("Cartbot"),console.error(t)}d([this._url])&&(v=!0,m.promiseQueue.add(i,(function(){return c()}),(function(){})))}!0!==a&&t.apply(this,arguments)};var t;!function(t){if("function"==typeof t.fetch)try{var e=t.fetch;t.fetch=function(){var t=m.string.getRandomString(10);try{if(p(arguments[0],"change")){if(!1!==(o=u(arguments,!0)))if(m.promiseQueue.add(t,(function(){return r(!1,"change")}),(function(){})),(i=g(o,!1,"change")).add.length>0){if(1===i.add.length){if(1*i.add[0].id===o.id)return new Promise(((t,e)=>{cancelled=!0,console.log("This item is required and can't be removed from the cart."),e(new Error("Can't remove this item from the cart."))}));var n=arguments,a=this;return!0,(D=e.apply(a,n)).then((function(e){T(i.add,!1).then((function(e){m.promiseQueue.process(t),m.nav.isCartPage()&&m.nav.reload()}))})),D}}else if(i.remove.length>0){n=arguments,a=this;return(D=e.apply(a,n)).then((function(e){O(i.remove).then((function(e){m.promiseQueue.process(t),m.nav.isCartPage()&&m.nav.reload()}))})),D}}else{var i,o=u(arguments);if(!1!==o)if(v=!0,m.promiseQueue.add(t,(function(){return c()}),(function(){})),(i=h(o,!1,"add")).add.length>0){n=arguments,a=this;!0,m.promiseQueue.add(t,(function(){return r(!1,"add")}),(function(){}));var arguments,l=!1;if(i.remove.length>0&&i.remove[0].id==o.id)if(void 0!==(arguments=n)[1]&&void 0!==arguments[1].body){for(var s=k(i.add),f=b(s),y=["sections","sections_url"],w=0;w<y.length;w++)try{if("string"==typeof arguments[1].body){var q=m.nav.getQueryParams(arguments[1].body);if(void 0!==q[y[w]])var S=q[y[w]];else S=null}else S=arguments[1].body.get(y[w]);null!=S&&f.append(y[w],S)}catch(t){console.log(t)}return"string"==typeof arguments[1].body?_(arguments[1].body)?arguments[1].body=JSON.stringify(s):arguments[1].body=C(f):arguments[1].body=f,l=!0,e.apply(a,arguments)}if(!1===l)return T(i.add,!1).then((t=>new Promise((e=>setTimeout((()=>e(t)),750))))).then((function(o){var r;return i.remove.length>0?((r=e.apply(a,n)).then((function(e){O(i.remove).then((function(e){m.promiseQueue.process(t)}))})),r):((r=e.apply(a,n)).then((function(e){m.promiseQueue.process(t)})),r)}))}else{if(i.remove.length>0){var D;n=arguments,a=this;return(D=e.apply(a,n)).then((function(e){O(i.remove).then((function(e){m.promiseQueue.process(t)}))})),D}m.promiseQueue.add(t,(function(){return r(!1,"add")}),(function(){}))}}}catch(t){console.log("Cartbot"),console.error(t)}return d(arguments)&&(v=!0,m.promiseQueue.add(t,(function(){return c()}),(function(){}))),(D=e.apply(this,arguments)).then((function(e){m.promiseQueue.process(t)})),D}}catch(t){console.log(t)}}(window)}(),function(){try{document.addEventListener("click",(function(t){try{var n=!1;if(n=t.target.matches('form[action*="/cart/add"] #gokwik-buy-now')||t.target.matches('form[action*="/cart/add"] #gokwik-buy-now *'),t.target.matches('form[action*="/cart/add"] .shopify-payment-button__button')||t.target.matches('form[action*="/cart/add"] .shopify-payment-button__button *')||t.target.matches('form[action*="/cart/add"] .shopify-payment-button__more-options')||t.target.matches('form[action*="/cart/add"] [onclick="onClickBuyBtn(this, event)"]')||t.target.matches('form[action*="/cart/add"] .lh-buy-now')||n){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var a=e(t.target,"form");if(null!==a){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var i=a.getAttribute("action"),c=new URLSearchParams,l=new FormData(a);for(var d of l)c.append(d[0],d[1]);var s=g(u([i,{body:c}]),!0,"add");i+="?cartbot-cart-call";var p="buy_now_queue";if(s.add.length>0){addingVariants=!0,m.promiseQueue.add(p,(function(){return T(s.add,!1)}),o)}else s.remove.length>0&&m.promiseQueue.add(p,(function(){return O(s.remove)}),o);var _=!0;if(s.remove.length>0)try{var h=c.get("id");s.remove[0].id===h&&(_=!1)}catch(t){console.log(t)}!0===_&&m.promiseQueue.add(p,(function(){return fetch(i,{method:"post",body:c}).then((function(t){}))}),o),m.promiseQueue.add(p,(function(){return r(!0,"add")}),o),m.promiseQueue.process(p)}}}catch(t){console.log(t.message)}}),!0)}catch(t){console.log(t.message)}!function(){var t="input[type='submit'][name='checkout']:not(.productForm-submit), button[type='submit'][name='checkout']:not(.productForm-submit):not([disabled]), button.checkout-button[name='checkout'], form.cart-form a.btn-checkout, a[href='/checkout'], #dropdown-cart button.btn-checkout, .cart-popup-content a.btn-checkout, .cart__popup a.checkout-button, .widget_shopping_cart_content a[href='/checkout'], .jas_cart_page button.checkout-button, .mini-cart-info button.mini-cart-button, a.checkout-link, a.mini-cart-checkout-button, .shopping_cart_footer .actions button";t+=', #dropdown-cart button.btn[onclick="window.location=\'/checkout\'"], form[action="/cart"] button[name="checkout"], .bundler-checkout-button, input.action_button[type="submit"][value="Checkout"]',t+=', button.Cart__Checkout[type="submit"][name="checkout"] span',t+=', .popup-cart a[href^="/checkout"], #slidecarthq .footer button.button',t+=", button.cart__checkout-cta, button.sidecart__checkout-cta",t+=", button.bc-atc-slide-checkout-btn",t+=", #ajax-cart__content .ajax-cart__button.button--add-to-cart",t+=", .cart_container form.js-cart_content__form button.add_to_cart.action_button",t+=', .cart_container .js-cart_content__form input.action_button[type="submit"]',t+=", #checkout_shipping_continue_btn",t+=', .spurit-occ2-checkout a[name="checkout"][href="/checkout/"]',t+=", #checkout-button",t+=", button.btn-checkout",t+=", button.rebuy-cart__checkout-button",t+=', .go-cart__button[href*="/checkout/"],  .go-cart__button[href*="/checkout?"]',t+=', a[href*="/checkout/"]:not([href*="/a/bundles/checkout/"]):not([href*="/subscriptions/"]), a[href*="/checkout?"]:not([href*="partial.ly"])',t+=", input.cart--button-checkout, a.satcb-cs-checkout-btn",t+=", button#parcelySubmit[data-cart-submit]",t+=', #checkout[type="submit"][name="checkout"], #checkout[type="submit"][name="checkout"] .custom-cobutton',t+=', a[href*="/checkout"]:not([href*="/a/bundles/checkout/"]):not([href*="/subscriptions/"]):not([href*="partial.ly"]):not([href^="https://checkout"])',t+=", .rebuy-cart__flyout-footer .rebuy-cart__flyout-subtotal + .rebuy-cart__flyout-actions > button.rebuy-button:first-child, .rebuy-cart__flyout-footer .rebuy-cart__flyout-subtotal + .rebuy-cart__flyout-actions > button.rebuy-button:first-child span",t+=", .rebuy-cart__checkout-button, .rebuy-cart__checkout-button span, rebuy-cart__checkout-button span i",t+=", .quick-cart__buy-now[data-buy-now-button], .icart-checkout-btn, .icartCheckoutBtn",t+=', button.cart__checkout, button[type="submit"][form="mini-cart-form"]',t+=', button[type="submit"][form="mini-cart-form"] span, button[type="submit"][form="mini-cart-form"] span svg',t+=', .SideCart__footer button[type="submit"]',t+=', div[onclick="clicktocheckoutnormal()"], div[onclick="clicktocheckout()"]',t+=", .mini-cart__actions .mini-cart__checkout, .mini-cart__actions .mini-cart__checkout *",t+=", button.checkout-button[onclick=\"window.location='/checkout'\"]",t+=', [data-ocu-checkout="true"]',t+=', input[type="submit"][name="checkout"].cart__submit',t+=', [data-ocu-checkout="true"], .btncheckout',t+=', form[action="/cart"][method="post"] button[type="submit"]:not([name*="update"]):not([name*="add"])',t+=", a.js-checkout, #mu-checkout-button",t+=', #cart-sidebar-checkout:not([disabled="disabled"]), .checkout-x-buy-now-btn, .checkout-x-buy-now-btn .hs-add--to--cart, .slider-cart-checkout-btn',t+=", button[onclick=\"window.location='/checkout'\"], .ymq-fake-checkout-btn, button.StickyCheckout__button",t+=', input[type="submit"][name="checkout"], a.checkout-button',t+=", .hs-content-checkout-button, .hs-content-checkout-button .hs-add--to--cart, .hs-content-checkout-button .hs-checkout-purchase",t+=", button.cart__checkout-button, button.cart__checkout-button .loader-button__text, button.cart__checkout-button .loader-button__loader, button.cart__checkout-button .loader-button__loader div, button.cart__checkout-button .loader-button__loader div svg",t+=", .cd-cart-checkout-button",t+=", .sezzle-checkout-button, .sezzle-checkout-button .sezzle-button-logo-img",t+=", .Cart__Footer .Cart__Checkout, .cart--checkout-button button, .cart--checkout-button button span, button.js-process-checkout",t+=', .j2t-checkout-link, .j2t-checkout-link span, #cart-checkout, #cart-notification-form button[name="checkout"]',t+=", .zecpe-btn-checkout, .zecpe-btn-checkout span, .mbcOverlayOnCheckout, #checkoutCustom, #wsg-checkout-one",t+=", .icart-chk-btn, .side-cart__checkout button#sideCartButton",t+=', .cart__checkout-button, #actionsArea button[onclick="startCheckoutEvent()"], button.cart--button-checkout, .kaktusc-cart__checkout, .cart__checkout',t+=', #cartform_bottom #actionsArea button, hh-button[href="/checkout"]',t+=", .cart-drawer--checkout-button button, .scd__checkout, button.scd__checkout span, #cart-summary button[data-cart-submit]",t+=", .cart__footer .cart__submit-controls input.cart__submit, #CartDrawer-Checkout, .ajax-cart__button-submit";try{document.addEventListener("click",(function(e){try{if(!0===canPreventCheckout&&e.target.matches(t)){if(void 0!==window.ZapietCheckoutEnabled&&!1===window.ZapietCheckoutEnabled)return!0;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),e.target.classList.add("cartbot-checkout-button-clicked"),i(e.target)}}catch(t){console.log(t.message),o()}}),!0)}catch(t){}}();try{addEventListener("storage",(function(t){"string"==typeof t.key&&"cartbot_data_cart"===t.key&&m.cart.get(!1,!1)}))}catch(t){console.log(t.message)}}(),setTimeout((function(){!1===v?r(!1,""):console.log("Can't check for Cartbot actions because an action is already being processed")}),1e3),window.addEventListener("icartAddToCartEvent",(function(){console.log("Item added to the cart"),r(!1,"add")})),window.addEventListener("icartUpdateCartEvent",(function(){console.log("iCart updated"),r(!1,"")}))},applyBots:function(){return!1===n&&(n=!0,i(),!0)}}}();if(void 0===w)var w={};g.init(),window.cartbot={outputProductUrls:function(){for(var t=[],e=0;e<a.length;e++)for(var n in a[e].product_variants_contain)a[e].product_variants_contain.hasOwnProperty(n)&&t.push(m.nav.getRootUrl()+"variants/"+encodeURIComponent(a[e].product_variants_contain[n].variant_id));console.log(JSON.parse(JSON.stringify(t)))},outputProductUrlsGrouped:function(t,e){for(var n={},i=0;i<a.length;i++){var o=a[i].name;for(var r in n[o]=[],a[i].product_variants_contain)a[i].product_variants_contain.hasOwnProperty(r)&&n[o].push(m.nav.getRootUrl()+"variants/"+encodeURIComponent(a[i].product_variants_contain[r].variant_id))}console.log(JSON.parse(JSON.stringify(n)))},applyBots:g.applyBots}}()}()}